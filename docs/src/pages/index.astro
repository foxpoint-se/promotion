---
import { getCollection } from "astro:content";
import { YouTube } from "astro-embed";
import Layout from "../layouts/Layout.astro";
import { NewsUpdateItem } from "../components/NewsUpdateItem";

const pageTitle = "Welcome to Foxpoint.";
const pageDescription =
  "Autonomous underwater vehicles. Foxpoint, Stockholm, Sweden.";

const updates = await getCollection("updates");

const sortedUpdates = [...updates].sort(function (a, b) {
  return b.data.date.valueOf() - a.data.date.valueOf();
});

const firstUpdate = sortedUpdates[0];
---

<Layout title={pageTitle} description={pageDescription}>
  <main>
    <div class="hero min-h-[80vh]">
      <div class="hero-content">
        <div class="max-w-2xl">
          <img
            src="/images/foxpoint_logo_outline.svg"
            class="mb-2xl"
            alt="Foxpoint logo"
          />

          <h1 class="text-5xl font-bold text-gradient">Welcome to Foxpoint.</h1>
          <p class="py-6">Autonomous underwater vehicles.</p>
          <div class="flex gap-2">
            <a href="/docs" class="btn btn-primary">Documentation</a>
            <a href="https://github.com/foxpoint-se" class="btn btn-outline">
              <div class="github-logo h-6 w-6 bg-neutral"></div>
              Github
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="px-md mb-40 max-w-3xl mx-auto">
      <h2 class="text-3xl font-bold mb-md">What is this?</h2>
      <YouTube id="https://youtu.be/KOSPxWNBfw4?si=a7EsqGDZAqqcgX65" />
      <div class="mt-32">
        <div class="flex mb-md items-baseline justify-between">
          <h2 class="text-3xl font-bold">Latest update</h2><a
            class="link link-primary"
            href="/updates">View all updates</a
          >
        </div>
        <NewsUpdateItem
          update={{
            ...firstUpdate.data,
            linkUrl: `/updates/${firstUpdate.slug}`,
          }}
        />
      </div>
    </div>
  </main>
</Layout>
